# Цель сервиса - перекачка данных из postgres в elasticsearch

Сервис состоит из трех модулей:
- postgres_extractor:
    подключается к postgres, получает все записи фильмов, персон и жанров, с ними связанных, а также самое новую дату апдейта из всез связных таблиц

- state: 
    класс, реализующий хранилище в redis, в котором хранятся самый новый апдейт каждого фильма (greatest от фильма + всех связанных таблиц) + last_modified (последний адейт именно фильма)

- elastic_loader:
    пачками загружает фильмы в elasticsearch, если их last_modified изменился

- main:
    модуль, координирующий работу остальных компонентов. В бесконечном цикле обходит таблицу в фильмами. Спит минуту, если никакие фильмы не были обновлены


# логгирование реализовано при помощи logging
# во всех подключениях и запросах используется backoff

запуск сервиса:
docker-compose up --build -d 

схема индекса:
https://code.s3.yandex.net/middle-python/learning-materials/es_schema.txt

